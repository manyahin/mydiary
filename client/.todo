store loading variable in global state
and move all notes calls to note service